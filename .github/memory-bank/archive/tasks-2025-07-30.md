# Archived Tasks (2025-07-30)

This file is an archive of the tasks.md as of July 30, 2025, prior to new initialization or major changes.

---

# Archived tasks.md content:

# Tasks

This file is the single source of truth for all tracked tasks in the project. Update this file as tasks are added, modified, or completed.

## Example
- [ ] Refactor monitoring folder for improved structure and clarity

- [ ] Implement logging with VictoriaLogs (Part 8)
  - Deploy VictoriaLogs for centralized log collection and storage
  - Configure log ingestion from Kubernetes workloads and system components
  - Integrate log querying and visualization (optionally in Grafana)
  - Provide user-friendly instructions for accessing and searching logs
  - Reference: https://medium.com/itnext/kubernetes-monitoring-a-complete-solution-part-8-logging-with-victorialogs-f17c44461034

- [ ] Visualize metrics with Grafana (Part 6)
  - Deploy Grafana and configure VictoriaMetrics as a data source
  - Import or create recommended dashboards for Kubernetes, node, and application metrics
  - Provide user-friendly instructions for accessing Grafana, switching dashboards, and basic troubleshooting
  - Reference: https://medium.com/itnext/kubernetes-monitoring-a-complete-solution-part-6-visualizing-with-grafana-956499ff4d87

#### Plan: Implement VictoriaMetrics Monitoring Stack (with Operator & etcd Certificate Automation)

**1. Overview**  
Replace the current monitoring setup with a VictoriaMetrics-based stack for metrics collection, storage, and visualization. Use the VictoriaMetrics Operator for lifecycle management. Automate etcd certificate extraction for secure metrics scraping (especially for Talos clusters).

**2. Files to Modify or Add**
- `monitoring/` folder (refactor and clean up)
- Add or update:
  - `victoria-metrics/` (Kustomize base/overlays, manifests)
  - `grafana/` (for dashboards)
  - `kustomization.yaml` (for both VictoriaMetrics and Grafana)
  - ServiceMonitor, PodMonitor, and scrape configs as needed
  - Script or manifest for extracting etcd certs into a Secret (for Talos)
  - ServiceMonitor for etcd
  - VictoriaMetrics Operator manifests (CRDs, deployment, RBAC, etc.)
  - `VictoriaMetricsCluster` CR (main metrics DB)
  - `VMAlert`, `VMRule`, `VMUser` (for alerting, rules, and user management as needed)

**3. Implementation Steps**
- Preparation: Remove/archive old manifests, ensure all CRDs are present.
- Deploy VictoriaMetrics Operator: Add and apply manifests.
- Create VictoriaMetricsCluster Resource: Define and configure for low-end hardware.
- Configure Scraping: Add ServiceMonitor/PodMonitor for system, apps, and etcd (with automated cert extraction).
- Configure Alerting and Rules: Add VMAlert/VMRule/VMUser as needed.
- Deploy Grafana:
  - Add/update manifests for Grafana deployment.
  - Configure VictoriaMetrics as a data source in Grafana.
  - Import or create recommended dashboards for Kubernetes, node, and application metrics (as described in Part 6).
  - Provide user-friendly instructions for accessing Grafana, switching dashboards, and basic troubleshooting.
- Access and Test: Expose UIs, verify metrics, test alerting, and confirm dashboards display expected data.

**4. Potential Challenges**
- Resource constraints on low-end hardware.
- CRD version mismatches or missing CRDs.
- Network access for dashboards.
- etcd scraping: Automating certificate extraction (Talos-specific).
- Ensuring ServiceMonitor and VM resources are correctly referenced and discovered.

**5. Testing Strategy**
- Confirm all pods are running and healthy.
- Check Grafana dashboards for live metrics.
- Verify etcd metrics are present.
- Test alerting and rule triggers.
- Simulate node/pod failures and verify alerting/metrics continuity.

**6. Next Steps**
- Document the setup in `docs/monitoring.md`.
- Add example dashboards and scrape configs.
- Document the etcd certificate extraction process for Talos.
- Provide sample VMAlert, VMRule, and VMUser resources for customization.

